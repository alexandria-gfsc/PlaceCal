<% content_for :first_min_js do %>
  <script src="//maps.google.com/maps/api/js?key=<%= ENV['GOOGLE_API_KEY'] %>"></script>
<% end %>

<%= simple_form_for @place do |f| %>
  <%= render_component "error", object: @place %>

  <h2>Basic Information</h2>

  <%= f.input :name %>
  <%= f.input :short_description %>

  <%= f.association :turfs, collection: @turfs, as: :check_boxes %>

  <h2>Address</h2>

  <ul class="nav nav-tabs">
    <li role="presentation" class="active select-existing-address">
      <a>Select an existing address</a>
    </li>
    <li role="presentation" class="add-new-address">
      <a>Add a new address</a>
    </li>
  </ul>

  <div id="add-new-address" class="hide">
    <%= f.fields_for :address, Address.new do |a| %>
      <div class="row new">
        <div class="col-md-6">
          <%= render 'address_fields', f: a %>
          <%= link_to_remove_association "Remove", a, class: "btn btn-primary hide exec-remove-new-address" %>
        </div>
        <div class="col-md-6">
          <div id="js-map" class="map map-marker place-map"></div>
        </div>
      </div>
    <% end %>
  </div>
  <div id="select-existing-address">
    <%= f.select :address_id, options_for_addresses, {}, class: 'form-control select2' %>
  </div>

  <h2>Information</h2>

  <div class="row">
    <div class="col-md-6">
      <%= f.input :phone %>
      <%= f.input :email %>
      <%= f.input :url %>
      <%= f.input :status %>
    </div>
    <div class="col-md-6">
      <%= f.input :opening_times %>
      <%= f.input :booking_info %>
      <%= f.input :accessibility_info %>
    </div>
  </div>

  <%= f.submit "Save Place", class: "btn btn-primary " %><br><br>
  <% if policy(Place).destroy? && !@place.new_record? %>
    <%= link_to "Destroy Place", @place, method: :delete, class: "btn btn-danger" %>
  <% end %>

  <div id="map-pin-div" data-url="<%= image_path('icons/map/map-marker.png') %>"></div>
<% end %>
